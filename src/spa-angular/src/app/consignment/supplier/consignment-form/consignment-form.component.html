@if (vm$ | async; as vm) {
<div class="card">
    <div class="col-12">
        <div class="card p-fluid">
            <form [formGroup]="consignmentForm" (ngSubmit)="onSubmit()" style="position: relative;">
                <div class="p-fluid p-formgrid grid">

                    <div class="field col-12 md:col-12">
                        <label htmlFor="supplierId" class="formLabel">Supplier ID</label>
                        <p-dropdown formControlName="supplierId" [options]="vm.suppliers" optionLabel="name"
                            optionValue="id" placeholder='Cliente'>
                        </p-dropdown>

                    </div>

                    <div class="field col-12 md:col-6">
                        <label htmlFor="consignmentDate" class="formLabel">Consignment Date</label>
                        <p-calendar formControlName="consignmentDate" [showIcon]="true" class="w-full"></p-calendar>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label htmlFor="pickupDate" class="formLabel">Pickup Date</label>
                        <p-calendar formControlName="pickupDate" [showIcon]="true" class="w-full"></p-calendar>
                    </div>

                    <div formArrayName="items" class="col-12">
                        <div *ngFor="let item of items.controls; let i=index" [formGroupName]="i"
                            class="p-fluid p-formgrid grid">
                            <div class="field col-12 md:col-4">
                                <label htmlFor="name" class="formLabel">Item Name</label>
                                <input type="text" formControlName="name" pInputText class="p-inputtext w-full"
                                    required>
                            </div>

                            <div class="field col-12 md:col-4">
                                <label htmlFor="description" class="formLabel">Description</label>
                                <input type="text" formControlName="description" pInputText class="p-inputtext w-full"
                                    required>
                            </div>

                            <div class="field col-12 md:col-4">
                                <label htmlFor="price" class="formLabel">Price</label>
                                <input type="number" formControlName="price" pInputText class="p-inputtext w-full"
                                    required>
                            </div>
                        </div>
                    </div>

                    <div
                        class="col-12 flex flex-column lg:flex-row justify-content-center align-items-center lg:justify-content-end my-6">
                        <button type="button" pButton pRipple
                            class="p-button-secondary p-button-outlined mt-3 lg:mt-0 w-full lg:w-auto flex-order-2 lg:flex-order-1 lg:mr-4"
                            (click)="addItem()" [label]="'Add Item'" icon="pi pi-fw pi-plus"></button>
                        <button type="submit" pButton pRipple
                            class="p-button-primary w-full lg:w-auto flex-order-1 lg:flex-order-2"
                            [disabled]="consignmentForm.invalid" [label]="'Submit'" icon="pi pi-fw pi-check"></button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
}
